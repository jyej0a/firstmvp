# Trend-Hybrid Admin MVP 개발 TODO

**개발 목표:** 2026-01-10 (MVP 1.0 Launch)  
**문서 버전:** v3.0 (현실적 타임라인 적용)  
**최종 수정:** 2024-12-02

> 💡 **개발 원칙:** 사용자 플로우를 따라 점진적으로 구현하고, 각 단계마다 실제로 동작하는 것을 확인한 후 다음 단계로 진행한다.

> ⚠️ **Phase 매핑:** 이 문서의 Phase 번호는 개발 편의상 정의되었으며, 
> 전체 프로젝트 일정은 [Timetable.md](./Timetable.md) 참조.
> - TODO Phase 0 = Timetable Phase 1 (인프라 세팅)
> - TODO Phase 2 = Timetable Phase 2 (시스템 개발)

## 📅 전체 타임라인

```
Phase 0: 인프라 세팅        12/03 - 12/10 (8일)   [비개발]
                            12/11 - 12/12 (2일)   [버퍼]
Phase 2: 코어 개발          12/13 - 12/29 (17일)  [개발]
Phase 3: 테스트 & 런칭      12/30 - 01/09 (11일)  [검증]

🚀 MVP 1.0 런칭: 2026-01-10

Post-MVP: 기능 확장         01/11 - 01/24 (14일)
🎉 v1.1 정식 런칭: 2026-01-24
```

## 🎯 MVP 1.0 vs v1.1 구분

### MVP 1.0 (01/10 런칭)
- ✅ 아마존 **30개** 수집
- ✅ 금지어 필터링
- ✅ 체크박스 선택 UI
- ✅ 타오바오 이미지 검색 브릿지 (1클릭)
- ✅ **US 타입 가격 자동 계산만**
- ✅ Shopify 일괄 등록

### v1.1 (01/24 런칭)
- ⏭️ **50개** 수집으로 확장
- ⏭️ CN 타입 가격 계산
- ⏭️ 중국어 이미지 필터링
- ⏭️ Toast 알림 시스템
- ⏭️ 반응형 디자인

---

## 📅 Phase 0: 인프라 세팅 (비개발, 대비마마 담당)

**기간:** 12/03 - 12/10 (8일)  
**상태:** 준비 중

### 0-1 개발 환경 확인 (12/03, 0.5일) ✅ 완료
- [x] Node.js 버전 확인 (v18 이상 권장) - **v22.19.0 설치 확인**
- [x] Puppeteer 설치 가능 환경 확인 - **v24.31.0 설치 및 테스트 성공**
- [x] 프록시 서비스 조사 (선택사항, Bot Detection 대응용) - **조사 완료 (MVP 1.0에서는 미사용)**

> 📄 **완료 보고서:** [phase-0-1-environment-check.md](./phase-0-1-environment-check.md)  
> 📄 **프록시 조사:** [proxy-services-research.md](./proxy-services-research.md)  
> 🧪 **테스트 스크립트:** [lib/scraper/test-puppeteer.ts](../lib/scraper/test-puppeteer.ts)

### 0-2 Shopify 스토어 개설 (12/04-12/06, 3일)
- [x] Shopify 스토어 생성 및 기본 설정 ✅ **2025-12-04 완료**
- [x] Admin API Access Token 발급 ✅ **2025-12-04 완료**
- [ ] 테스트 상품 등록 연습

### 0-3 PG 연동 (12/07-12/08, 2일)
- [ ] 결제 시스템 연동 설정

### 0-4 드롭쉬핑 명 세팅 (12/09-12/10, 2일)
- [ ] 비즈니스 정보 등록 및 최종 점검

### ✅ Phase 0 완료 조건
- [x] 개발 환경 확인 완료 (Node.js, Puppeteer) ✅
- [x] Shopify 스토어가 생성되고 Access Token 발급됨 ✅ **2025-12-04 완료**
- [ ] 테스트 상품을 수동으로 등록할 수 있음
- [ ] PG 연동 및 비즈니스 정보 등록 완료
- [ ] 모든 인프라가 준비되어 개발 시작 가능

⚠️ **중요:** Phase 0 완료 전까지 Phase 2 시작 불가 (특히 Shopify Access Token 필수)

---

## 📋 Phase 1: 최소 UI 구성 (입력 & 트리거)

### 목표
사용자가 키워드/URL을 입력하고 "수집 시작" 버튼을 클릭할 수 있는 최소한의 UI 구성

### 1.1 대시보드 기본 페이지
- [x] `app/dashboard/page.tsx` 파일 생성
  - [x] 페이지 레이아웃 (제목, 설명)
  - [x] 검색 입력창 (placeholder: "키워드 입력 또는 Amazon URL 붙여넣기...")
  - [x] "수집 시작" 버튼
  - [x] 버튼 클릭 시 입력값 콘솔 출력 (테스트용)

### 1.2 트렌드 숏컷 버튼
- [x] 상단에 Quick Links 섹션 추가
  - [x] Kalodata 버튼 (새 탭 열기)
  - [x] Amazon Best Sellers 버튼 (새 탭 열기)
  - [x] TikTok Trends 버튼 (새 탭 열기)

### 1.3 라우팅 설정
- [x] 메인 페이지(`app/page.tsx`)에서 `/dashboard`로 리디렉션

### ✅ Phase 1 완료 조건
- [x] 대시보드 페이지가 브라우저에서 정상 표시됨
- [x] 트렌드 숏컷 버튼 클릭 시 새 탭으로 외부 사이트가 열림
- [x] 입력창에 텍스트 입력 후 버튼 클릭 시 콘솔에 값이 출력됨

---

## 🔍 Phase 2: 스크래핑 로직 구현 (30개 수집)

**기간:** 12/13 - 12/17 (5일)

### 목표
실제 아마존에서 상품 정보 30개를 수집하여 콘솔에 출력 (DB 저장 없이)

### 2.1 환경 구성 (12/13, 1일)
- [ ] `pnpm add puppeteer` 실행
- [ ] Puppeteer 설치 확인
- [ ] TypeScript 타입 정의 (`types/index.ts`)
  - [ ] `ScrapedProductRaw` 인터페이스
  - [ ] `Product` 인터페이스
  - [ ] `SourcingType`, `ProductStatus` 타입

### 2.2 URL 처리 유틸리티 (12/13, 0.5일)
- [ ] `lib/utils/url-processor.ts` 파일 생성
  - [ ] `processSearchInput()` 함수 구현
    - [ ] URL 여부 판단 (http로 시작하는지)
    - [ ] URL인 경우: amazon.com 도메인 검증
    - [ ] 키워드인 경우: Amazon 검색 URL 생성
    - [ ] 예외 처리 (빈 값, 잘못된 URL 등)

### 2.3 아마존 스크래핑 로직 (12/14-12/16, 3일)
- [ ] `lib/scraper/amazon-scraper.ts` 파일 생성
  - [ ] Puppeteer 브라우저 초기화
  - [ ] User-Agent 설정 (Bot Detection 회피)
  - [ ] 아마존 검색 결과 페이지 접속
  - [ ] 상품 정보 추출 (ASIN, 제목, 이미지, 가격, URL)
  - [ ] **페이지네이션 로직 추가** (2-3 페이지, 30개까지)
  - [ ] 랜덤 딜레이 추가 (1-3초)
  - [ ] 콘솔에 결과 출력

### 2.4 스크래핑 API Route (12/16, 0.5일)
- [ ] `app/api/scrape/route.ts` 파일 생성
  - [ ] POST 요청 핸들러
  - [ ] URL 처리 유틸리티 호출
  - [ ] 스크래핑 함수 호출
  - [ ] 결과를 JSON으로 반환
  - [ ] 에러 핸들링 (Timeout, Network Error 등)

### 2.5 대시보드 연동 (12/17, 0.5일)
- [ ] 대시보드에서 "수집 시작" 버튼 클릭 시
  - [ ] `/api/scrape`에 POST 요청
  - [ ] 로딩 상태 표시 ("수집 중...")
  - [ ] 결과를 콘솔에 출력
  - [ ] 기본 에러 메시지 표시

### ✅ Phase 2 완료 조건
- [ ] 키워드 입력 → Amazon URL 자동 변환 확인
- [ ] URL 직접 입력 → 그대로 사용 확인
- [ ] **스크래핑 실행 시 실제 아마존 상품 30개가 콘솔에 출력됨**
- [ ] ASIN, 제목, 이미지, 가격이 제대로 추출됨
- [ ] 2-3 페이지에서 데이터 수집 확인

---

## 💾 Phase 2 (계속): 데이터베이스 설계

**기간:** 12/18 (1일) - Phase 2의 일부

### 목표
스크래핑된 데이터를 저장할 DB 스키마 설계 및 마이그레이션

### 2.6 Products 테이블 마이그레이션 (12/18, 0.5일)
- [ ] `supabase/migrations/[timestamp]_create_products_table.sql` 작성
  - [ ] 기본 필드 (id, user_id, asin, source_url, title, description)
  - [ ] 이미지 (images TEXT[])
  - [ ] 옵션 (variants JSONB)
  - [ ] **US 타입 전용 필드** (amazon_price, margin_rate, selling_price)
  - [ ] 상태 (status: draft/uploaded/error)
  - [ ] UNIQUE 제약조건 (asin)
  - [ ] RLS 비활성화

### 2.7 Banned Keywords 테이블 마이그레이션 (12/18, 0.5일)
- [ ] `supabase/migrations/[timestamp]_create_banned_keywords_table.sql` 작성
  - [ ] 테이블 스키마 (id, keyword, created_at)
  - [ ] 초기 금지어 데이터 INSERT (Nike, Adidas, Apple 등 15개)

### 2.8 마이그레이션 실행
- [ ] Supabase MCP 또는 Dashboard에서 마이그레이션 실행
- [ ] 테이블 생성 확인
- [ ] 초기 데이터 확인

### ✅ DB 설계 완료 조건
- [ ] Supabase에서 `products` 테이블이 생성됨
- [ ] Supabase에서 `banned_keywords` 테이블이 생성되고 초기 데이터가 있음
- [ ] TypeScript 타입 정의가 완료되고 import 가능함

---

## 📊 Phase 2 (계속): DB 저장 & 리스트 표시

**기간:** 12/19 - 12/22 (4일)

### 목표
스크래핑한 데이터를 DB에 저장하고 체크박스가 있는 리스트로 표시

### 2.9 금지어 필터링 (12/19, 1일)
- [ ] 스크래핑 로직에 금지어 필터링 추가
  - [ ] `filterByBannedKeywords()` 함수 구현
  - [ ] Supabase에서 금지어 목록 조회
  - [ ] 제목에 금지어 포함 시 제외
  - [ ] 필터링 통계 (제거된 개수) 반환

### 2.10 DB 저장 로직 (12/19, 0.5일)
- [ ] 스크래핑 API에 DB 저장 로직 추가
  - [ ] Supabase 클라이언트 생성 (service-role)
  - [ ] 필터링된 상품을 `products` 테이블에 INSERT
  - [ ] 중복 ASIN 처리 (ON CONFLICT)
  - [ ] 성공/실패 카운트 반환

### 2.11 상품 조회 API (12/20, 0.5일)
- [ ] `app/api/products/route.ts` 생성
  - [ ] GET 요청 핸들러
  - [ ] 현재 사용자의 상품 목록 조회
  - [ ] 최신순 정렬
  - [ ] 페이지네이션 준비 (limit/offset)

### 2.12 상품 리스트 컴포넌트 (12/20-12/21, 2일)
- [ ] `components/ProductList.tsx` 생성
  - [ ] 테이블 구조 (Checkbox, Image, Title, ASIN, Margin, Price, Status)
  - [ ] **체크박스 컬럼 추가**
    - [ ] 전체 선택/해제 (헤더)
    - [ ] 개별 선택 (각 행)
    - [ ] 선택된 개수 표시 ("48개 중 5개 선택")
  - [ ] 빈 리스트 상태 UI
  - [ ] 썸네일 이미지 표시
  - [ ] 반응형 테이블 스크롤

### 2.13 대시보드 통합 (12/22, 0.5일)
- [ ] 대시보드에서 상품 목록 조회
  - [ ] 페이지 로드 시 자동 조회
  - [ ] 수집 완료 후 목록 새로고침
  - [ ] 수집된 상품 개수 표시
  - [ ] "선택 등록" 버튼 추가 (아직 비활성)

### ✅ DB 저장 & 리스트 완료 조건
- [ ] 수집 시 금지어가 필터링됨 (콘솔 로그 확인)
- [ ] 수집된 상품이 DB에 저장됨 (Supabase Dashboard에서 확인)
- [ ] 대시보드에 저장된 상품 목록이 표시됨
- [ ] 이미지, 제목, ASIN, Status가 제대로 표시됨
- [ ] **체크박스로 상품 선택 가능**
- [ ] **선택된 개수가 실시간으로 표시됨**

---

## 💰 Phase 2 (계속): US 타입 가격 자동 계산

**기간:** 12/23 - 12/24 (2일)

### 목표
US 타입 기준 마진율로 판매가 자동 계산 (MVP 1.0 범위)

### 2.14 가격 계산 로직 (12/23, 1일)
- [ ] `lib/pricing/calculator.ts` 생성
  - [ ] `calculateSellingPriceUS()` 함수
    - [ ] 공식: `amazonPrice × (1 + marginRate)`
    - [ ] 기본 마진율: 40%
  - [ ] `validatePriceData()` 함수
    - [ ] amazonPrice > 0 검증
    - [ ] marginRate 범위 검증 (0-100%)

### 2.15 리스트에 마진/가격 컬럼 추가 (12/24, 1일)
- [ ] ProductList에 컬럼 추가
  - [ ] Margin 입력창 (기본값 40%)
  - [ ] Selling Price 표시 (자동 계산, Read-only)
  - [ ] 마진율 변경 시 즉시 재계산 (onChange)

### 2.16 상품 업데이트 API (12/24, 0.5일)
- [ ] `app/api/products/[id]/route.ts` 생성
  - [ ] PATCH 요청 핸들러
  - [ ] Margin Rate 업데이트
  - [ ] Selling Price 자동 재계산
  - [ ] DB 저장

### ✅ 가격 계산 완료 조건
- [ ] 아마존 가격 기반으로 판매가가 자동 계산됨
- [ ] 마진율 입력 시 즉시 가격이 재계산됨
- [ ] 계산된 가격이 정확함 (수동 계산과 비교)
- [ ] 변경사항이 DB에 저장됨

> 💡 **CN 타입 가격 계산은 v1.1에서 구현** (원가 입력 필요)

---

## 🌉 Phase 2 (계속): 타오바오 이미지 검색 브릿지

**기간:** 12/25 (1일)

### 목표
이미지 클릭 시 타오바오 이미지 검색 새 탭 열기 (원가 확인용)

### 2.17 타오바오 브릿지 구현 (12/25, 1일)
- [ ] ProductList의 이미지에 클릭 이벤트 추가
- [ ] 클릭 시 타오바오 URL 생성
  - [ ] URL: `https://s.taobao.com/search?imgfile=${encodeURIComponent(imageUrl)}`
- [ ] 새 탭으로 열기 (`window.open` 또는 `<a target="_blank">`)
- [ ] 이미지 hover 시 커서 변경 (pointer) 및 툴팁 표시

### ✅ 타오바오 브릿지 완료 조건
- [ ] 이미지 클릭 시 타오바오 이미지 검색 페이지가 새 탭으로 열림
- [ ] 검색 결과에 해당 상품이 표시됨 (수동 확인)
- [ ] 사용자가 타오바오에서 원가를 쉽게 확인할 수 있음

---

## 🛒 Phase 2 (완료): Shopify 일괄 등록

**기간:** 12/26 - 12/29 (4일)

### 목표
체크박스로 선택한 상품들을 Shopify에 일괄 등록 (필수 기능)

### 2.18 환경 변수 설정 (12/26, 0.5일)
- [ ] `.env` 파일에 Shopify 정보 추가
  - [ ] SHOPIFY_STORE_URL
  - [ ] SHOPIFY_ACCESS_TOKEN
- [ ] 연결 테스트 (간단한 API 호출)

### 2.19 Shopify API 클라이언트 (12/26-12/27, 1.5일)
- [ ] `lib/shopify/client.ts` 생성
  - [ ] `createProduct()` 함수
    - [ ] 상품 생성 API 호출
    - [ ] 이미지 URL 배열 전달
  - [ ] `uploadProductImages()` 함수 (필요시)
  - [ ] 에러 핸들링 (Rate Limit, Network Error 등)
  - [ ] 재시도 로직 (최대 3회)

### 2.20 일괄 등록 API (12/28, 1.5일)
- [ ] `app/api/shopify/bulk-upload/route.ts` 생성
  - [ ] POST 요청 핸들러
  - [ ] `product_ids` 배열 수신
  - [ ] 각 상품 검증
    - [ ] selling_price > 0 확인
    - [ ] 필수 필드 존재 확인
  - [ ] 순차적 Shopify 등록 (병렬 처리 지양)
  - [ ] Status 업데이트 (uploaded/error)
  - [ ] 진행 상황 및 결과 반환

### 2.21 대시보드 통합 (12/29, 0.5일)
- [ ] "선택 등록" 버튼 활성화
- [ ] 선택된 상품 없을 시 버튼 비활성화
- [ ] 클릭 시 일괄 등록 API 호출
- [ ] 로딩 상태 표시 ("등록 중... 3/5")
- [ ] 성공/실패 카운트 표시
- [ ] 리스트 새로고침 (Status 업데이트 반영)

### ✅ Shopify 연동 완료 조건
- [ ] Shopify 연결 성공 (환경 변수 설정 완료)
- [ ] **체크한 상품들이 Shopify에 등록됨**
- [ ] Shopify Dashboard에서 상품 확인 가능
- [ ] Status가 "uploaded"로 변경됨
- [ ] 에러 발생 시 Status가 "error"로 변경되고 메시지 표시
- [ ] 등록 성공률 95% 이상 달성

---

## 🧪 Phase 3: 테스트 & 런칭

**기간:** 12/30 - 01/09 (11일)  
**버퍼:** 5일 (충분한 여유)

### 목표
전체 플로우 테스트 및 MVP 1.0 배포

### 3.1 E2E 테스트 (12/30-01/02, 4일)
- [ ] **전체 플로우 10회 반복 테스트**
  1. [ ] 트렌드 숏컷 → 외부 사이트 이동 확인
  2. [ ] 키워드 입력 → 30개 수집 → 리스트 표시
  3. [ ] 금지어 필터링 동작 확인
  4. [ ] 이미지 클릭 → 타오바오 검색 페이지 열림
  5. [ ] 마진율 입력 → 판매가 자동 계산
  6. [ ] 체크박스 선택 → Shopify 일괄 등록
  7. [ ] Shopify Dashboard에서 상품 확인
- [ ] **다양한 테스트 케이스**
  - [ ] 여러 키워드로 테스트 (5개 이상)
  - [ ] URL 직접 입력 테스트
  - [ ] 빈 리스트 상태 확인
  - [ ] 에러 케이스 확인 (잘못된 URL, 네트워크 에러 등)

### 3.2 KPI 검증 (01/02, 0.5일)
- [ ] **소싱 속도:** 30개 리스트업 30초 이내 달성 확인
- [ ] **매칭 효율:** 타오바오 이미지 검색 1클릭 확인
- [ ] **등록 성공률:** 95% 이상 달성 확인

### 3.3 버그 수정 (01/03-01/06, 4일) ⭐ 주요 버퍼
- [ ] 발견된 버그 목록 작성 및 우선순위 분류
  - [ ] Critical: 즉시 수정 필요
  - [ ] High: 런칭 전 수정 필요
  - [ ] Medium: 런칭 후 수정 가능
- [ ] Critical/High 우선순위 버그 수정
- [ ] 수정 후 재테스트

### 3.4 배포 준비 (01/07-01/08, 2일)
- [ ] 환경변수 프로덕션 설정
  - [ ] Supabase 프로덕션 URL/Key 확인
  - [ ] Shopify 프로덕션 Access Token 확인
  - [ ] Clerk 프로덕션 키 확인
- [ ] Vercel 배포
  - [ ] 빌드 에러 해결
  - [ ] 환경변수 설정
  - [ ] 도메인 연결 (선택 사항)
- [ ] 프로덕션 환경 테스트
  - [ ] 전체 플로우 1회 이상 테스트
  - [ ] 성능 확인 (로딩 속도 등)

### 3.5 최종 점검 (01/09, 1일) ⭐ 예비일
- [ ] 런칭 체크리스트 완료
- [ ] 문서 업데이트 (README, 사용 가이드 등)
- [ ] 백업 계획 확인
- [ ] 모니터링 도구 설정 (Sentry 등, 선택 사항)

### ✅ Phase 3 완료 조건
- [ ] 전체 플로우가 안정적으로 작동함
- [ ] Critical/High 버그가 모두 수정됨
- [ ] KPI 목표 달성 확인
- [ ] 프로덕션 배포 완료
- [ ] 실제 사용 가능한 상태

---

## 🚀 MVP 1.0 런칭

**런칭일:** 2026-01-10

### 포함 기능
✅ 아마존 30개 수집  
✅ 금지어 자동 필터링  
✅ 체크박스 선택 UI  
✅ 타오바오 이미지 검색 브릿지  
✅ US 타입 가격 자동 계산  
✅ Shopify 일괄 등록

---

## 📈 Post-MVP: v1.1 기능 확장

**기간:** 01/11 - 01/24 (14일)  
**목표:** 정식 v1.1 런칭

### Post-1: 50개 수집으로 확장 (2일)
- [ ] 페이지네이션 로직 확장 (4-5 페이지)
- [ ] 진행 상황 실시간 표시 ("수집 중... 35/50")
- [ ] KPI 재검증 (50개 30초 이내)

### Post-2: CN 타입 가격 계산 (3일)
- [ ] Cost Price 입력 필드 추가
- [ ] Type 선택 드롭다운 (US/CN)
- [ ] CN 타입 계산 로직: `(costPrice + shipping + extra) / (1 - marginRate)`
- [ ] 검증: CN 타입일 때 cost_price 필수

### Post-3: 중국어 이미지 필터링 (2일)
- [ ] `lib/utils/image-filter.ts` 생성
- [ ] `containsChinese()` 함수 (OCR 또는 파일명 기반)
- [ ] 이미지 갤러리에 필터 옵션 추가

### Post-4: UX 개선 (3일)
- [ ] Toast 알림 시스템 (성공/에러/경고)
- [ ] 로딩 스피너 개선
- [ ] 타임아웃 처리 (60초)
- [ ] 반응형 디자인 (모바일 대응)

### Post-5: 상세 편집 기능 (4일, 선택 사항)
- [ ] `components/ProductEditor.tsx` 생성
- [ ] 이미지 갤러리 슬라이더
- [ ] 상품명/설명 편집 UI
- [ ] 개별 Shopify 등록

---

**현재 진행 상황:** 
- ✅ Phase 1 완료 (최소 UI 구성)
- ✅ Phase 0-1 완료 (개발 환경 확인)
- ✅ Phase 0-2 진행 중 (Shopify 스토어 개설 완료, Access Token 발급 완료)
- 🔄 Phase 0-3 예정 (PG 연동 시작)

**다음 작업:** Phase 0 나머지 작업 (0-3 PG 연동, 0-4 드롭쉬핑 세팅) 완료 후 Phase 2 본격 시작

**MVP 1.0 목표일:** 2026-01-10  
**v1.1 목표일:** 2026-01-24
