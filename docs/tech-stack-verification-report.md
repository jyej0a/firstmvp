# κΈ°μ  μ¤νƒ κ²€μ¦ λ³΄κ³ μ„

**μ‘μ—… μ½”λ“:** 0-1  
**μ‘μ—…λ…:** κΈ°μ  μ¤νƒ κ²€μ¦  
**μ‹¤ν–‰ μΌμ:** 2025-12-03  
**λ‹΄λ‹Ήμ:** Cursor AI  
**μƒνƒ:** β… μ™„λ£

---

## π“‹ κ²€μ¦ ν•­λ©

### 1. Node.js ν™κ²½ β…

**λ²„μ „:** v22.19.0  
**μ”κµ¬μ‚¬ν•­:** v18 μ΄μƒ  
**κ²°κ³Ό:** β… **ν†µκ³Ό** - κ¶μ¥ λ²„μ „ μ΄μƒ μ„¤μΉλ¨

### 2. Puppeteer μ„¤μΉ λ° λ™μ‘ β…

**μ„¤μΉ λ²„μ „:** puppeteer@24.31.0  
**Chrome λ²„μ „:** 142.0.7444.175 (mac_arm-142.0.7444.175)

**κ²€μ¦ λ‚΄μ©:**
- β… Puppeteer ν¨ν‚¤μ§€ μ„¤μΉ μ„±κ³µ
- β… Chrome λΈλΌμ°μ € μλ™ μ„¤μΉ μ™„λ£
- β… λΈλΌμ°μ € μ‹¤ν–‰ λ° νμ΄μ§€ μ ‘μ† ν…μ¤νΈ ν†µκ³Ό
- β… νμ΄μ§€ μ λ© μ¤ν¬λν•‘ κΈ°λ¥ ν™•μΈ

**ν…μ¤νΈ κ²°κ³Ό:**
```
π€ Puppeteer ν…μ¤νΈ μ‹μ‘...

1οΈβƒ£ λΈλΌμ°μ € μ‹¤ν–‰ μ¤‘...
β… λΈλΌμ°μ € μ‹¤ν–‰ μ„±κ³µ!

2οΈβƒ£ μƒ νμ΄μ§€ μƒμ„± μ¤‘...
β… νμ΄μ§€ μƒμ„± μ„±κ³µ!

3οΈβƒ£ ν…μ¤νΈ νμ΄μ§€ μ ‘μ† μ¤‘ (example.com)...
β… νμ΄μ§€ μ ‘μ† μ„±κ³µ!

4οΈβƒ£ νμ΄μ§€ μ λ© κ°€μ Έμ¤κΈ°...
β… νμ΄μ§€ μ λ©: "Example Domain"

π‰ λ¨λ“  ν…μ¤νΈ ν†µκ³Ό! Puppeteerκ°€ μ •μƒμ μΌλ΅ μ‘λ™ν•©λ‹λ‹¤.
```

**κ²°κ³Ό:** β… **ν†µκ³Ό** - μ•„λ§μ΅΄ μ¤ν¬λν•‘μ— ν•„μ”ν• κΈ°λ¥ λ¨λ‘ μ •μƒ μ‘λ™

---

### 3. Clerk + Supabase ν†µν•© ν™•μΈ β…

**ν†µν•© λ°©μ‹:** Clerkμ™€ Supabase λ„¤μ΄ν‹°λΈ ν†µν•© (2025λ…„ 4μ›” μ΄ν›„ κ¶μ¥)

**κ²€μ¦λ νμΌ:**

#### 3.1 Client Componentμ© ν΄λΌμ΄μ–ΈνΈ
- **νμΌ:** `lib/supabase/clerk-client.ts`
- **κΈ°λ¥:** `useClerkSupabaseClient()` Hook
- **μƒνƒ:** β… κµ¬ν„ μ™„λ£
- **νΉμ§•:**
  - Clerkμ `useAuth()` Hook μ‚¬μ©
  - `getToken()`μΌλ΅ μ„Έμ… ν† ν° μλ™ νλ“
  - React Hook ν•νƒλ΅ μ κ³µ

#### 3.2 Server Componentμ© ν΄λΌμ΄μ–ΈνΈ
- **νμΌ:** `lib/supabase/server.ts`
- **κΈ°λ¥:** `createClerkSupabaseClient()` ν•¨μ
- **μƒνƒ:** β… κµ¬ν„ μ™„λ£
- **νΉμ§•:**
  - Clerkμ `auth()` ν•¨μ μ‚¬μ©
  - Server Component λ° Server Actionμ—μ„ μ‚¬μ©
  - Async ν•¨μλ΅ ν† ν° νλ“

#### 3.3 Service Role ν΄λΌμ΄μ–ΈνΈ
- **νμΌ:** `lib/supabase/service-role.ts`
- **κΈ°λ¥:** `getServiceRoleClient()` ν•¨μ
- **μƒνƒ:** β… κµ¬ν„ μ™„λ£
- **νΉμ§•:**
  - RLS μ°ν κ°€λ¥ (κ΄€λ¦¬μ κ¶ν•)
  - μ„λ²„ μ‚¬μ΄λ“ μ „μ©
  - ν™κ²½λ³€μ κ²€μ¦ λ΅μ§ ν¬ν•¨

#### 3.4 κ³µκ° λ°μ΄ν„°μ© ν΄λΌμ΄μ–ΈνΈ
- **νμΌ:** `lib/supabase/client.ts`
- **μƒνƒ:** β… μ΅΄μ¬ ν™•μΈ
- **μ©λ„:** μΈμ¦ λ¶ν•„μ”ν• κ³µκ° λ°μ΄ν„° μ ‘κ·Ό

**μΈμ¦ νλ¦„:**
```
μ‚¬μ©μ λ΅κ·ΈμΈ (Clerk)
    β†“
Clerk ν† ν° μƒμ„±
    β†“
Supabase ν΄λΌμ΄μ–ΈνΈκ°€ ν† ν° μ‚¬μ©
    β†“
RLS μ •μ±…: auth.jwt()->>'sub'λ΅ Clerk user ID ν™•μΈ
    β†“
λ°μ΄ν„° μ ‘κ·Ό ν—κ°€
```

**κ²°κ³Ό:** β… **ν†µκ³Ό** - λ¨λ“  ν΄λΌμ΄μ–ΈνΈ νμΌμ΄ μ¬λ°”λ¥΄κ² κµ¬ν„λ¨

---

### 4. ν”„λ΅μ νΈ κµ¬μ΅° λ° μ»¨λ²¤μ… β…

**κ²€μ¦ ν•­λ©:**
- β… `lib/supabase/` λ””λ ‰ν† λ¦¬μ— ν΄λΌμ΄μ–ΈνΈ νμΌ λ¶„λ¦¬
- β… νμΌλ… kebab-case μ¤€μ (`clerk-client.ts`, `service-role.ts`)
- β… TypeScript νƒ€μ… μ •μ μ™„λ£
- β… JSDoc μ£Όμ„μΌλ΅ μ‚¬μ© μμ‹ λ¬Έμ„ν™”
- β… Next.js 15 Async Request APIs ν¨ν„΄ μ μ©

**κ²°κ³Ό:** β… **ν†µκ³Ό** - ν”„λ΅μ νΈ μ»¨λ²¤μ… μ¤€μ

---

## π― μΆ…ν•© κ²°κ³Ό

| κ²€μ¦ ν•­λ© | μƒνƒ | λΉ„κ³  |
|----------|------|------|
| Node.js ν™κ²½ | β… ν†µκ³Ό | v22.19.0 μ„¤μΉ |
| Puppeteer μ„¤μΉ | β… ν†µκ³Ό | v24.31.0 + Chrome 142 |
| Puppeteer λ™μ‘ | β… ν†µκ³Ό | λΈλΌμ°μ € μλ™ν™” μ •μƒ |
| Clerk ν†µν•© | β… ν†µκ³Ό | Client/Server ν΄λΌμ΄μ–ΈνΈ κµ¬ν„ |
| Supabase ν΄λΌμ΄μ–ΈνΈ | β… ν†µκ³Ό | 4κ°€μ§€ ν΄λΌμ΄μ–ΈνΈ λ¶„λ¦¬ |
| ν”„λ΅μ νΈ κµ¬μ΅° | β… ν†µκ³Ό | μ»¨λ²¤μ… μ¤€μ |

**μ „μ²΄ ν‰κ°€:** β… **κ²€μ¦ μ™„λ£**

---

## π“ κ²°λ΅ 

**λ¨λ“  κΈ°μ  μ¤νƒμ΄ μ •μƒμ μΌλ΅ μ„¤μΉλμ–΄ μμΌλ©°, ν†µν•© κ°€λ¥μ„±μ΄ ν™•μΈλμ—μµλ‹λ‹¤.**

### ν™•μΈλ μ‚¬ν•­
1. β… Node.js ν™κ²½ μ ν•© (v22.19.0)
2. β… Puppeteer μ •μƒ μ‘λ™ (μ•„λ§μ΅΄ μ¤ν¬λν•‘ κ°€λ¥)
3. β… Clerk + Supabase λ„¤μ΄ν‹°λΈ ν†µν•© κµ¬ν„ μ™„λ£
4. β… 4κ°€μ§€ Supabase ν΄λΌμ΄μ–ΈνΈ μ—­ν• λ³„ λ¶„λ¦¬
5. β… ν”„λ΅μ νΈ μ»¨λ²¤μ… μ¤€μ

### λ‹¤μ λ‹¨κ³„
- **Timetable Phase 1 (μΈν”„λΌ μ„Έν…)** μ§„ν–‰ κ°€λ¥
- νΉν **1-1 Shopify μ¤ν† μ–΄ κ°μ„¤** μ‘μ—…λ¶€ν„° μ‹μ‘ κ¶μ¥

---

**κ²€μ¦ μ™„λ£μΌ:** 2025-12-03  
**λ‹¤μ μ‘μ—…:** Phase 1 (μΈν”„λΌ μ„Έν…) β†’ 1-1 Shopify μ¤ν† μ–΄ κ°μ„¤

